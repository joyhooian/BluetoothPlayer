{"version":3,"sources":["webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?68ae","webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?01c0","webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?1864","webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?aeac","uni-app:///pages/alarms/alarms.vue","webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?be9c","webpack:///D:/Joyhoo/Documents/Projects/BluetoothPlayer/pages/alarms/alarms.vue?fded","uni-app:///main.js"],"names":["createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACa;;;AAGlE;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAioB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0DrpB,U;AACA;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA,iBADA;AAEA,4BAFA;AAGA,kBAHA;AAIA,mBAJA;AAKA,0BALA;AAMA,+BANA;AAOA,oBAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,gCAFA;AAGA,gCAHA;AAIA,gCAJA;AAKA,gCALA;AAMA,gCANA;AAOA,gCAPA,CAhBA;;;AA0BA,GA7BA;AA8BA;AACA,YADA,oBACA,CADA,EACA;AACA;AACA;AACA,uCADA;;AAGA,OAJA,MAIA;AACA;AACA,yCADA;;AAGA;AACA,KAXA;AAYA,cAZA,wBAYA;AACA;AACA;AACA;AACA;AACA;AACA,aADA,GACA,gCADA,GACA,+BADA;AAEA,aAFA,IAEA,qDAFA;AAGA,aAHA,IAGA,+BAHA;AAIA;AACA;AACA,WAFA;AAGA;AACA;AACA,OAXA;AAYA;AACA;AACA;AACA;AACA;AACA,iDADA;AAEA,iDAFA;AAGA,+CAHA;AAIA,qDAJA;AAKA;AACA;AACA,eAPA;AAQA;AACA;AACA,eAVA;;AAYA,WAbA,EAaA,iBAbA;AAcA,SAfA;AAgBA;AACA;AACA;AACA,+CADA;AAEA,+CAFA;AAGA,6CAHA;AAIA,0DAJA;AAKA;AACA;AACA,aAPA;AAQA;AACA;AACA,aAVA;;AAYA,SAbA,EAaA,gCAbA;AAcA;AACA;AACA,KA9DA;AA+DA,eA/DA,uBA+DA,CA/DA,EA+DA;AACA;AACA,KAjEA;AAkEA,QAlEA,gBAkEA,CAlEA,EAkEA;AACA;AACA,iEADA;;AAGA,KAtEA,EA9BA;;AAsGA,SAtGA,qBAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA9GA,E;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAg6B,CAAgB,q2BAAG,EAAC,C;;;;;;;;;;;ACAp7B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C","file":"pages/alarms/alarms.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./alarms.vue?vue&type=template&id=641a1f86&name=alarms&\"\nvar renderjs\nimport script from \"./alarms.vue?vue&type=script&lang=js&\"\nexport * from \"./alarms.vue?vue&type=script&lang=js&\"\nimport style0 from \"./alarms.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/alarms/alarms.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarms.vue?vue&type=template&id=641a1f86&name=alarms&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarms.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarms.vue?vue&type=script&lang=js&\"","<template name=\"alarms\">\n\t<view>\n\t\t<cu-custom bgColor=\"bg-gradual-red\">\r\n\t\t\t<block slot=\"content\">定时</block>\r\n\t\t</cu-custom>\r\n\t\t<view class=\"cu-bar bg-white radius-bottom shadow shadow-blur\" :style=\"{position: 'fixed', left: 0, width: '100%', top:CustomBar + 'px', zIndex: 1000}\">\r\n\t\t\t<view class=\"action flex-sub solids-right\">\r\n\t\t\t\t<button class=\"cu-btn round lines-white\" @click=\"Navigate\" id=\"set-time\"><text class=\"text-black text-lg\">+定时播放</text></button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action flex-sub\">\r\n\t\t\t\t<button class=\"cu-btn round lines-white\" @click=\"Navigate\" id=\"time-after\"><text class=\"text-black text-lg\">+间隔播放</text></button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"box\" style=\"margin-bottom: 260rpx; margin-top: 120rpx;\">\r\n\t\t\t<view class=\"cu-list menu card-menu margin-top sm-border\" v-for=\"(item, index) in alarmsInfo\" :key=\"index\">\r\n\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t<view class=\"centent\">{{\"编号 \" + (index + 1)}}</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<button class=\"cu-btn radius bg-green\" :id=\"index\" @click=\"Edit\">编辑</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t<view class=\"centent\">时间</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<text>{{item.startTime + ' - ' + item.stopTime}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t<view class=\"centent\">重复</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<view v-for=\"(weekday, weekdayNum) in alarmsInfo[index].weekdays\" :key=\"weekdayNum\" class=\"cu-tag light sm round bg-red\">{{weekdaysString[weekday].string}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t<view class=\"centent\">{{'音量 ' + item.volume}}</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<text>{{item.relayStatus?'继电器 开':'继电器 关'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t<view class=\"centent\">是否启用</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<switch @change=\"ChagngUsing\" :id=\"index\"></switch>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"bottomBox\">\r\n\t\t\t<view class=\"flex justify-center\">\r\n\t\t\t\t<button class=\"cu-btn bg-red shadow-blur round lg\" style=\"width: 240rpx;\" @click=\"uploadData\">\r\n\t\t\t\t\t<text v-if=\"uploadLoading\" class=\"cuIcon-loading1 cuIconfont-spin\"></text><text v-else class=\"text-sm\">设置同步</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\r\n\tvar _self\n\texport default {\r\n\t\tname: \"alarms\",\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tdevices: [],\r\n\t\t\t\tprimaryServiceUUID: '',\r\n\t\t\t\treadUUID: '',\r\n\t\t\t\twriteUUID: '',\r\n\t\t\t\tuploadLoading: false,\r\n\t\t\t\tCustomBar: this.CustomBar,\r\n\t\t\t\talarmsInfo: [],\r\n\t\t\t\t//[{\r\n\t\t\t\t//\tisUsing: boolen,\r\n\t\t\t\t//\trelayStatus: boolen,\r\n\t\t\t\t//\tstartTime: \"12:00\",\r\n\t\t\t\t//\tstopTime: \"12:00\",\r\n\t\t\t\t//\tvolum: number,\r\n\t\t\t\t//\tweekdays: [0, 1, 2]\r\n\t\t\t\t//}]\r\n\t\t\t\tweekdaysString: [ \r\n\t\t\t\t\t{index: 0, string: '周一'},\r\n\t\t\t\t\t{index: 1, string: '周二'},\r\n\t\t\t\t\t{index: 2, string: '周三'},\r\n\t\t\t\t\t{index: 3, string: '周四'},\r\n\t\t\t\t\t{index: 4, string: '周五'},\r\n\t\t\t\t\t{index: 5, string: '周六'},\r\n\t\t\t\t\t{index: 6, string: '周日'},\r\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tNavigate(e) {\r\n\t\t\t\tif (e.currentTarget.id === 'set-time') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/alarms/set-time'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (e.currentTarget.id === 'time-after') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/alarms/time-after'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuploadData() {\r\n\t\t\t\tthis.uploadLoading = true\r\n\t\t\t\tvar alarmsMessage = new Array\r\n\t\t\t\tthis.alarmsInfo.forEach((alarm, index) => {\r\n\t\t\t\t\tif (alarm.isUsing) {\r\n\t\t\t\t\t\tvar cmd = \"AT+TIMESET\" + ((index+1)<10?'0'+(index+1):(index+1)) +\r\n\t\t\t\t\t\t'T' + alarm.startTime.replace(':','') + alarm.stopTime.replace(':','') +\r\n\t\t\t\t\t\t'V' + (alarm.volume<10?'0'+alarm.volume:alarm.volume) +\r\n\t\t\t\t\t\t'J' + (alarm.relayStatus?'01':'00')\r\n\t\t\t\t\t\talarm.weekdays.forEach((weekday) => {\r\n\t\t\t\t\t\t\tcmd += 'W' + '0' + (weekday + 1)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\talarmsMessage.push(cmd)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (this.primaryServiceUUID != '' && this.writeUUID != ''){\r\n\t\t\t\t\tconsole.log(\"发送消息至: Service \" + this.primaryServiceUUID + \" Write \" + this.writeUUID)\r\n\t\t\t\t\talarmsMessage.forEach((item, index) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\twx.writeBLECharacteristicValue({\r\n\t\t\t\t\t\t\t\tdeviceId: this.devices[0].deviceId,\r\n\t\t\t\t\t\t\t\tserviceId: this.primaryServiceUUID,\r\n\t\t\t\t\t\t\t\tcharacteristicId: this.writeUUID,\r\n\t\t\t\t\t\t\t\tvalue: this.MessageToArrayBuffer(item),\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"发送成功, 发送内容: \" + item)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"发送失败 \" + res.errMsg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 100*(index+1))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tvar stopMessage = \"AT+TIMESETOVER\"\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\twx.writeBLECharacteristicValue({\r\n\t\t\t\t\t\t\tdeviceId: this.devices[0].deviceId,\r\n\t\t\t\t\t\t\tserviceId: this.primaryServiceUUID,\r\n\t\t\t\t\t\t\tcharacteristicId: this.writeUUID,\r\n\t\t\t\t\t\t\tvalue: this.MessageToArrayBuffer(stopMessage),\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"发送成功, 发送内容: \" + stopMessage)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"发送失败 \" + res.errMsg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 100*(alarmsMessage.length+2))\r\n\t\t\t\t}\r\n\t\t\t\tthis.uploadLoading = false\r\n\t\t\t},\r\n\t\t\tChagngUsing(e) {\r\n\t\t\t\tthis.alarmsInfo[e.currentTarget.id].isUsing = e.detail.value\r\n\t\t\t},\r\n\t\t\tEdit(e) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/alarms/set-time?index=' + e.currentTarget.id\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t_self = this\r\n\t\t\t_self.alarmsInfo = getApp().globalData.alarmsInfo\r\n\t\t\t_self.devices = getApp().globalData.devices\r\n\t\t\t_self.primaryServiceUUID = getApp().globalData.primaryServiceUUID\r\n\t\t\t_self.readUUID = getApp().globalData.readUUID\r\n\t\t\t_self.writeUUID = getApp().globalData.writeUUID\r\n\t\t\tconsole.log(_self)\r\n\t\t}\n\t}\n</script>\n\n<style>\n\t.bottomBox {\r\n\t\tposition: fixed;\r\n\t\tmargin: auto;\r\n\t\tbottom: 60rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t}\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarms.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarms.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608229742097\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/alarms/alarms.vue'\ncreatePage(Page)"],"sourceRoot":""}