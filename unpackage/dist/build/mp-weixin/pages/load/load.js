(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/load/load"],{"0583":function(n,e,i){"use strict";(function(n){i("29ac");t(i("66fd"));var e=t(i("f2de"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,i("543d")["createPage"])},"7bcd":function(n,e,i){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u={name:"load",data:function(){return{currentVolume:100,isShowVolume:!1,loading:!0,StatusBar:this.StatusBar,CustomBar:this.CustomBar,tempFile:[],musicInfo:[],innerAudioContext:null,curMusic:null,isMultiSelect:!1,isSelectedAll:!1,musicSelected:[],playModeIndex:0,playMode:["cuIcon-musicfill","cuIcon-refresh","cuIcon-order"],isPlaying:!1,remain:0,remainSec:0,remainMin:0,remainHour:0,remainString:""}},computed:{playDisabled:function(){return 0==t.musicInfo.length}},methods:{ChangeVolume:function(n){null!=t.innerAudioContext.volume&&(t.innerAudioContext.volume=n.detail.value/100)},ShowVolume:function(){t.isShowVolume=!0},HideVolume:function(){t.isShowVolume=!1},MultiSelectStart:function(){t.isMultiSelect=!0},SelectAll:function(){t.musicInfo.forEach((function(n,e){n.isSelect=!0})),t.isSelectedAll=!0},SelectNothing:function(){t.musicInfo.forEach((function(n,e){n.isSelect=!1})),t.isSelectedAll=!1},MultiSelectCancel:function(){t.isMultiSelect=!1,t.SelectNothing()},deleteMusic:function(){for(var n=0;;)if(t.musicInfo[n].isSelect?t.musicInfo.splice(n,1):n++,null==t.musicInfo[n])break;0==t.musicInfo.length&&(t.isMultiSelect=!1)},MusicSelect:function(n){t.isMultiSelect?t.musicInfo[n.currentTarget.id].isSelect=!t.musicInfo[n.currentTarget.id].isSelect:(t.curMusic=n.currentTarget.id,getApp().globalData.curMusic=n.currentTarget.id,t.isPlaying&&(t.innerAudioContext.src=t.musicInfo[t.curMusic].path),t.clearRemain())},LastMusic:function(){var n=t.musicInfo.length;t.curMusic--,getApp().globalData.curMusic--,t.curMusic<0&&(t.curMusic=n-1,getApp().globalData.curMusic=n-1),t.isPlaying&&(t.innerAudioContext.src=t.musicInfo[t.curMusic].path,t.clearRemain())},NextMusic:function(){var n=t.musicInfo.length;t.curMusic++,getApp().globalData.curMusic++,t.curMusic>=n&&(t.curMusic,getApp().globalData.curMusic=0),t.isPlaying&&(t.innerAudioContext.src=t.musicInfo[t.curMusic].path,t.clearRemain())},ChangePlayMode:function(){switch(t.playModeIndex++,t.playModeIndex>=3&&(t.playModeIndex=0),t.playModeIndex){case 0:wx.showToast({title:"单次播放模式",icon:"none"});break;case 1:wx.showToast({title:"单曲循环模式",icon:"none"});break;case 2:wx.showToast({title:"全部循环模式",icon:"none"})}},PlayPause:function(){null!=t.musicInfo[t.curMusic]?(t.isPlaying=!t.isPlaying,getApp().globalData.isPlaying=t.isPlaying,t.isPlaying?(t.innerAudioContext.src=t.musicInfo[t.curMusic].path,t.innerAudioContext.autoplay=!0,t.innerAudioContext.onCanplay((function(){t.innerAudioContext.duration,setTimeout((function(){t.musicInfo[t.curMusic].duration=t.innerAudioContext.duration,t.culculateRemain()}),10)})),t.innerAudioContext.play(),t.innerAudioContext.onEnded((function(){t.clearRemain(),0==t.playModeIndex?(t.isPlaying=!1,getApp().globalData.isPlaying=!1):(1==t.playModeIndex||(t.curMusic++,t.curMusic>t.musicInfo.length&&(t.curMusic=0),t.innerAudioContext.src=t.musicInfo[t.curMusic].path),t.innerAudioContext.play())})),t.innerAudioContext.onTimeUpdate((function(){t.culculateRemain()}))):t.innerAudioContext.pause()):wx.showToast({title:"请先导入音乐",icon:"none"})},culculateRemain:function(){t.remain=parseInt(t.innerAudioContext.duration-t.innerAudioContext.currentTime),t.remainSec=t.remain%60,t.remainMin=parseInt(t.remain/60),t.remainHour=parseInt(t.remain/3600),t.formatTime()},clearRemain:function(){t.remain=0,t.remainSec=0,t.remainMin=0,t.remainHour=0,t.formatTime()},formatTime:function(){t.remainString="",t.remainHour<10&&(t.remainString+="0"),t.remainString+=t.remainHour.toString()+":",t.remainMin<10&&(t.remainString+="0"),t.remainString+=t.remainMin.toString()+":",t.remainSec<10&&(t.remainString+="0"),t.remainString+=t.remainSec.toString()},importMusic:function(){wx.chooseMessageFile({count:10,type:"file",extension:["mp3","wma","flac","aac"],success:function(n){n.tempFiles.forEach((function(n){t.musicInfo.push({name:n.name,duration:null,path:n.path,isSelect:!1,currentTime:0})}))}})}},created:function(){t=this,t.tempFile=getApp().globalData.tempFile,t.musicInfo=getApp().globalData.musicInfo,t.innerAudioContext=getApp().globalData.innerAudioContext,t.curMusic=getApp().globalData.curMusic,t.isPlaying=getApp().globalData.isPlaying},deactivated:function(){console.log("here"),t.innerAudioContext.stop()}};e.default=u},"7ca3":function(n,e,i){},"906f":function(n,e,i){"use strict";var t=i("7ca3"),u=i.n(t);u.a},bc8b:function(n,e,i){"use strict";var t;i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return t}));var u=function(){var n=this,e=n.$createElement,i=(n._self._c,n.__map(n.musicInfo,(function(e,i){var t=n.__get_orig(e),u=e.name.length>12?e.name.substr(0,12):null;return{$orig:t,g0:u}})));n.$mp.data=Object.assign({},{$root:{l0:i}})},c=[]},ddd2:function(n,e,i){"use strict";i.r(e);var t=i("7bcd"),u=i.n(t);for(var c in t)"default"!==c&&function(n){i.d(e,n,(function(){return t[n]}))}(c);e["default"]=u.a},f2de:function(n,e,i){"use strict";i.r(e);var t=i("bc8b"),u=i("ddd2");for(var c in u)"default"!==c&&function(n){i.d(e,n,(function(){return u[n]}))}(c);i("906f");var o,a=i("f0c5"),r=Object(a["a"])(u["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],o);e["default"]=r.exports}},[["0583","common/runtime","common/vendor"]]]);