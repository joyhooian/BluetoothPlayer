(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/alarms/alarms"],{2786:function(e,t,i){"use strict";i.r(t);var a=i("340f"),r=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},"2a1d":function(e,t,i){},"340f":function(e,t,i){"use strict";(function(e){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"alarms",data:function(){return{devices:[],primaryServiceUUID:"",readUUID:"",writeUUID:"",uploadLoading:!1,CustomBar:this.CustomBar,alarmsInfo:[],alarmShow:{},timeAfterInfo:{},weekdaysString:[{index:0,string:"周一"},{index:1,string:"周二"},{index:2,string:"周三"},{index:3,string:"周四"},{index:4,string:"周五"},{index:5,string:"周六"},{index:6,string:"周日"}]}},methods:{Navigate:function(t){"set-time"===t.currentTarget.id?e.navigateTo({url:"/pages/alarms/set-time"}):"time-after"===t.currentTarget.id&&e.navigateTo({url:"/pages/alarms/time-after"})},uploadData:function(){var e=this;if(!this.uploadLoading)if(this.uploadLoading=!0,console.log(this.alarmShow),this.alarmShow.isSetTime){console.log("上传时间设定");var t=new Array;this.alarmsInfo.forEach((function(e,i){if(e.isUsing){var a=new Array;a.push(126),a.push(9+e.weekdays.length),a.push(19),a.push(i+1),a.push(Number(e.startTime.substr(0,2))),a.push(Number(e.startTime.substr(3,2))),a.push(Number(e.stopTime.substr(0,2))),a.push(Number(e.stopTime.substr(3,2))),a.push(e.volume),a.push(e.relayStatus?1:0),e.weekdays.forEach((function(e){a.push(e+1)})),a.push(239);var r=new Uint8Array(a);t.push(r.buffer)}})),0==t.length?(wx.showToast({title:"请启用要设置的任务!",icon:"none"}),this.uploadLoading=!1):""!=this.primaryServiceUUID&&""!=this.writeUUID?(console.log("发送消息至: Service "+this.primaryServiceUUID+" Write "+this.writeUUID),t.forEach((function(t,i){setTimeout((function(){wx.writeBLECharacteristicValue({deviceId:e.devices[0].deviceId,serviceId:e.primaryServiceUUID,characteristicId:e.writeUUID,value:t,success:function(e){console.log("发送成功"),console.log(t)},fail:function(e){console.log("发送失败")}})}),200*i)})),setTimeout((function(){var t=new Uint8Array([126,2,85,239]);wx.writeBLECharacteristicValue({deviceId:e.devices[0].deviceId,serviceId:e.primaryServiceUUID,characteristicId:e.writeUUID,value:t.buffer,success:function(e){console.log("发送成功"),console.log(t.buffer)},fail:function(e){console.log("发送失败")},complete:function(){e.uploadLoading=!1}})}),200*t.length)):(console.log(t),wx.showToast({title:"请连接设备！",icon:"none"}),this.uploadLoading=!1)}else if(this.alarmShow.isTimeAfter){console.log("上传间隔时间");var i=new Array;i.push(126),i.push(6),i.push(24),i.push((65280&this.timeAfterInfo.secAfter)>>8),i.push(255&this.timeAfterInfo.secAfter),i.push(this.timeAfterInfo.volume),i.push(this.timeAfterInfo.relayStatus?1:0),i.push(239);var a=new Uint8Array(i);wx.writeBLECharacteristicValue({deviceId:this.devices[0].deviceId,serviceId:this.primaryServiceUUID,characteristicId:this.writeUUID,value:a.buffer,success:function(e){console.log("发送成功"),console.log(a.buffer)},fail:function(e){console.log("发送失败")}})}},ChagngUsing:function(e){this.alarmsInfo[e.currentTarget.id].isUsing=e.detail.value},Edit:function(t){e.navigateTo({url:"/pages/alarms/set-time?index="+t.currentTarget.id})}},beforeCreate:function(){console.log("进入定时页面")},created:function(){i=this,i.alarmsInfo=getApp().globalData.alarmsInfo,i.devices=getApp().globalData.devices,i.primaryServiceUUID=getApp().globalData.primaryServiceUUID,i.readUUID=getApp().globalData.readUUID,i.writeUUID=getApp().globalData.writeUUID,i.alarmShow=getApp().globalData.alarmShow,i.timeAfterInfo=getApp().globalData.timeAfterInfo},mounted:function(){}};t.default=a}).call(this,i("543d")["default"])},a35a:function(e,t,i){"use strict";var a=i("2a1d"),r=i.n(a);r.a},bc19:function(e,t,i){"use strict";i.r(t);var a=i("c1d6"),r=i("2786");for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("a35a");var s,o=i("f0c5"),c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=c.exports},c1d6:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var r=function(){var e=this,t=e.$createElement;e._self._c},n=[]},f9f8:function(e,t,i){"use strict";(function(e){i("29ac");a(i("66fd"));var t=a(i("bc19"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])}},[["f9f8","common/runtime","common/vendor"]]]);